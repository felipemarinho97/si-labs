angular.module("angular-rating-icons",[]).directive("angularRatingIcons",function(){return{replace:!0,require:"ngModel",scope:{ngModel:"=",onChangeFunction:"&onChange"},template:'<ul ng-class="[listClass, decimal]"><li ng-repeat="icon in icons track by $index" ng-style="getListItemStyle($index)" ng-click="setValue($index)" ng-mouseenter="paintIcons($index)" ng-mouseleave="resetIcons()" ><i ng-class="getClass($index)" ng-style="getIconStyle($index)"></i></li></ul>',link:function(a,b,c,d){a.icons=new Array(+c.max||5),a.value=d.$viewValue||+c.defaultValue||0,a.size=+c.iconSize||20,a.spacing=+c.iconSpacing||5,a.listClass="angular-rating-icons",a.readOnly=!(void 0===c.readonly),a.decimal=void 0!==c.decimal?"angular-rating-icons-decimal":void 0;var e=c.colorBase||"black",f=c.colorSelected||"orange",g=c.colorHover||"orange",h=c.iconBase||"fa",i=c.iconEmpty||"fa-star-o",j=c.iconFull||"fa-star",k=c.iconHover||"fa-star";d.$render=function(){a.value=0===d.$viewValue?0:d.$viewValue||a.value,d.$setViewValue(a.value)},a.getClass=function(b){return h+" "+(b>=a.value?i:j)},a.getIconStyle=function(b){var c={color:b>=a.value?e:f};return a.decimal?(c.height=a.size-2+"px",c.width=a.size-2+"px",c.left=b%2?"-"+(a.size-2)/2+"px":"",c):c},a.getListItemStyle=function(b){var c={"font-size":a.size+"px","padding-right":b!==a.icons.length-1?a.spacing+"px":"0"};return a.decimal?(c.height=a.size-2+"px",c.width=(a.size-2)/2+"px",b%2||(c["padding-right"]="0"),c):c},a.setValue=function(b){a.readOnly||(d.$setViewValue(a.value=b+1),a.onChangeFunction())},a.resetIcons=function(){a.paintIcons(a.value-1,!0)},a.paintIcons=function(c,d){if(!a.readOnly)for(var h=b.find("li").find("i"),l=0;l<h.length;l++){var m=angular.element(h[l]);c>=l?m.removeClass(i).addClass(d?j:k).css("color",d?f:g):m.removeClass(j).addClass(i).css("color",d?e:m.css("color")),d&&k!==j&&m.removeClass(k)}}}}});
